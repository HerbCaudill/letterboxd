import { uniq } from 'lodash'
import { range } from './range'
import { commonWords, distinctLetterCount, generateRandomSolution, isValid } from './words'

describe('distinctLetterCount', () => {
  it('should return the number of distinct letters in a word, excluding spaces', () => {
    expect(distinctLetterCount('COLORFUL LIGHTEN')).toBe(12)
    expect(distinctLetterCount('RELOCKED DEFIANT')).toBe(12)
    expect(distinctLetterCount('QUOTED DIVERSIFY')).toBe(12)
    expect(distinctLetterCount('COLORFUL BRISKET')).toBe(12)
    expect(distinctLetterCount('HAT TRUNK')).toBe(7)
    expect(distinctLetterCount('DYSMORPHIC CAVITATION')).toBe(14)
  })
})

describe('isValid', () => {
  it('should validate common words', () => {
    expect(isValid('HOUSE')).toBe(true)
    expect(isValid('PARTY')).toBe(true)
  })

  it('should not validate words with double letters', () => {
    expect(isValid('PRETTY')).toBe(false)
    expect(isValid('BALLERINA')).toBe(false)
  })

  it('should not validate proper names', () => {
    expect(isValid('AMERICAN')).toBe(false)
    expect(isValid('ROBERT')).toBe(false)
  })

  it('should validate uncommon words', () => {
    expect(isValid('ABACA')).toBe(true)
    expect(isValid('ZYMURGY')).toBe(true)
  })
})

describe('commonWords', () => {
  it('should contain common words', () => {
    expect(commonWords).toContain('HOUSE')
    expect(commonWords).toContain('PARTY')
  })

  it('should not contain words with double letters', () => {
    expect(commonWords).not.toContain('PRETTY')
    expect(commonWords).not.toContain('BALLERINA')
  })

  it('should not contain proper names', () => {
    expect(commonWords).not.toContain('AMERICAN')
    expect(commonWords).not.toContain('ROBERT')
  })

  it('should not contain uncommon words', () => {
    expect(commonWords).not.toContain('ABACA')
    expect(commonWords).not.toContain('ZYMURGY')
  })
})

describe('generateRandomSolution', () => {
  it('should generate consistent results when given a seed', () => {
    const N = 500
    const solutions = range(N).map(i => generateRandomSolution(`generateRandomSolution-${i}`))

    // There shouldn't be any duplicates
    expect(uniq(solutions).length).toBe(N)

    expect(solutions).toMatchInlineSnapshot(`
      [
        "TEMPS SEARCHING",
        "TUNING GRANDCHILDREN",
        "UTILIZED DISABLING",
        "DAUGHTER REGISTRATION",
        "SOAKED DRAFTING",
        "BAPTISM MONTHLY",
        "COLOGNE ETHNOGRAPHY",
        "USHERED DISCONTINUITY",
        "CONTRIBUTIONS STIFLE",
        "PERPETRATED DESTROYING",
        "ETHYLENE EQUALIZATION",
        "GATHERINGS SAVAGELY",
        "CRACKLING GATHERS",
        "SNAILS SUPERMARKET",
        "DOPED DISCOLORATION",
        "GENERATORS SUBSCRIBERS",
        "SEIZING GLAUCOMA",
        "DERIVING GRAPHICAL",
        "BOYISH HEALTHFUL",
        "SIGHTED DISQUALIFIED",
        "DISMAL LIGHTHOUSE",
        "BRAKING GLOBULES",
        "INDICATORS SPELT",
        "GASPED DECORATION",
        "PUBLISHES SHARPENED",
        "DILUTION NUMBERS",
        "REPRODUCTIONS SODIUM",
        "SWEPT TRIUMPHANT",
        "COMPETE EXCLUSIVE",
        "FAVORS SPECTACULAR",
        "FURTHEST TWINKLE",
        "MACRO OWNERSHIP",
        "RETORTED DISTURBANCE",
        "BAKING GESTURED",
        "REALISE EXPEDIENCY",
        "INCLUSIONS SECONDARY",
        "DISPENSING GOVERNMENTS",
        "STAINING GODFATHER",
        "SPORADIC COMBINED",
        "HARLEQUIN NATIONS",
        "RECIPROCATING GOSPELS",
        "MIDST THEORIZING",
        "ORDERS STIMULANTS",
        "COMPLIMENT TALKS",
        "CONTEMPLATE ENCOUNTERED",
        "AFTERWARDS STIMULATED",
        "VIGOROUS SOUTHEASTERN",
        "DARKEN NOURISHING",
        "FOREFRONT TRIUMPHED",
        "TRANSITORY YOURSELVES",
        "OUTDATED DESCRIPTIONS",
        "SNOWY YARDSTICK",
        "INDIVIDUALISTIC CURLY",
        "LORDSHIP PLEADING",
        "MEDICINAL LOWEST",
        "WHITE EQUALIZATION",
        "PERPETRATED DENOUNCING",
        "EXPLORERS SHORTENING",
        "PANGS SYNTHESIZED",
        "INTENDED DRAWBACKS",
        "PENETRATE ESTABLISHED",
        "CHURCHMEN NONSPECIFIC",
        "OURSELVES SURPRISINGLY",
        "PREDOMINANCE EXTRA",
        "LATER RECORDINGS",
        "SURVIVING GEOGRAPHER",
        "GUISE EVAPORATED",
        "MISDEMEANOR REVOLT",
        "ENDURE EJACULATION",
        "OUTSIDERS SHACK",
        "SINGLES SPECTATORS",
        "ABSTAINED DISCONTINUITY",
        "RADIATE ESOPHAGEAL",
        "ADVISERS SCRUTINY",
        "DEHYDROGENASE ESTRANGEMENT",
        "INTERACTIONAL LUMINOUS",
        "SPOKESMEN NEGLECTED",
        "URBAN NOVELISTS",
        "FLAKES STRENGTHENED",
        "DESTROYERS SUBVERSION",
        "ACTION NUMBERING",
        "CATALOG GERMANIUM",
        "ACHING GOURMET",
        "LIVING GRANDPARENTS",
        "ANIMA ADJUSTABLE",
        "CONCLUSIVE EMPLOY",
        "PSYCHOPATHOLOGY YOURS",
        "DELEGATE ENCYCLOPEDIA",
        "GENEROUSLY YANKED",
        "SAPIENS SHORTCUT",
        "BECOMES STABILIZATION",
        "BELIEVING GRANDEST",
        "CRITICISE EQUIVALENCE",
        "DISPEL LOCALIZATION",
        "LITERACY YOUTHS",
        "RIVETS SOPHISTICATED",
        "KNOCKS SCRAMBLING",
        "EXCHANGING GENERALITY",
        "BANDED DISORGANIZATION",
        "VISUALIZATION NEURITIS",
        "PLUNDERING GLOVES",
        "MANUSCRIPT TAPESTRY",
        "MANDATES SCRUTINIZED",
        "POSES SIMULATING",
        "ADMIRES SPECIALTY",
        "SPECULATIVE EIGHTIES",
        "KERNEL LIQUIDATION",
        "FRIGHTEN NATURALIST",
        "RADIATE EMPLOYES",
        "INTESTINAL LUBRICATING",
        "OUTPUTS SECONDARY",
        "CHEST TRANSDUCTION",
        "CONFIDENTIALITY YIELDS",
        "QUALIFY YOUNGER",
        "CODED DEREGULATION",
        "OBSTINACY YOGURT",
        "OBSTRUCTIVE ENSUED",
        "ALKALI INCOMPATIBILITY",
        "PRIEST THOUGHTFUL",
        "KILNS SHORTAGES",
        "VICTOR RELUCTANTLY",
        "MECHANISMS STROKES",
        "DEFIED DISTURBANCE",
        "MAGNIFICATION NEGOTIABLE",
        "JACKET TOURISM",
        "ABNORMALITIES SENSITIZATION",
        "GASPED DISINFECTION",
        "PACES STIMULATING",
        "LYNCHING GRANDSON",
        "INCUMBENTS SPORTSMEN",
        "ALOUD DISCHARGING",
        "PERPLEXING GRANDEST",
        "WARNS SYMBOLIC",
        "RENEWING GODFATHER",
        "FRACTURED DISCOURAGED",
        "BUILDING GERMANIC",
        "INTRAVENOUS SURFACES",
        "SENSIBLY YOUTHFUL",
        "TANKER REPRODUCES",
        "DEPICTION NATURAL",
        "EUTHANASIA ADVISABLE",
        "FESTIVITIES SOCIALIZED",
        "BLOND DISRESPECT",
        "SENSOR RECOGNIZABLE",
        "SEMBLANCE EXALTATION",
        "LOATHING GROUNDS",
        "ENCAMPMENT TWINKLING",
        "CHRISTIE EXPOSING",
        "INTEGRATIVE EXPERIMENTED",
        "PURGATORY YIELD",
        "HEAVIER REGULATION",
        "CONTENTIONS SURVEYED",
        "REPRODUCES STADIUM",
        "VIRILE EXECUTIONS",
        "SYSTOLIC CROUCHED",
        "BOMBS SPECIALIZED",
        "PARADIGMATIC CURTAILED",
        "SEPARABLE ETYMOLOGY",
        "DEGRADED DEVELOPMENT",
        "FINGERS SUPERIMPOSED",
        "AVAILABLE ESCORTED",
        "PRECEDENCE ENVIRONMENTS",
        "HONEST TACKLING",
        "GUNBOATS SECURITIES",
        "DISPOSABLE EXCUSES",
        "FACTORIAL LEAPING",
        "AMELIORATION NUMBERED",
        "BENEFICIARIES SLUNG",
        "AIMING GENEROUSLY",
        "UNQUESTIONABLE ECSTATIC",
        "MARKETPLACE ENGAGES",
        "THYSELF FADING",
        "SNACKS SUPERVISED",
        "ENDING GLYCOPROTEIN",
        "NEUROLOGY YESTERDAY",
        "PIANIST TECHNOLOGIES",
        "CERAMICS SURVEYING",
        "TOMATOES SINCERELY",
        "REMONSTRANCE ELOQUENT",
        "ARGYLE ENVISIONED",
        "IMPARTIALITY YARDSTICK",
        "FLATS SERVICING",
        "SHEILA ABSURDITY",
        "SCULPTURAL LIBIDO",
        "HEROIN NEGATIVELY",
        "IMPROVES SHEWING",
        "SHADOWY YOUNGEST",
        "SHAKEN NEOPLASTIC",
        "WINTER RESEMBLANCE",
        "GEOGRAPHICAL LOCATED",
        "CARDIAC CONSTITUENCY",
        "STIRS SYMBOLIZED",
        "HITHER REASONABLY",
        "ANOMALIES STRICTURES",
        "DELINEATED DISCOUNTING",
        "CLAIMED DECOMPOSING",
        "CENSUS SPECIALIZATION",
        "SITUATE ENFORCEMENT",
        "TRACEABLE EXCLUSIVE",
        "AORTA ACKNOWLEDGED",
        "CONVEYANCE EPISTEMIC",
        "PLEASE EXPENDITURES",
        "COMPUTATIONAL LEARNT",
        "DRAGONS SUSPECT",
        "RELATIVITY YOUNGER",
        "AUGMENTED DEFINITIONS",
        "IDEAS SUBJUNCTIVE",
        "ADAPTIVE EMPLOYMENT",
        "REVERED DOCUMENTING",
        "BIOLOGIST TANKERS",
        "DIVISION NEUROLOGY",
        "ROADS SIMULATING",
        "LEARNER RECONSTITUTED",
        "LACKS STRETCHING",
        "GUIDE EPISTEMOLOGY",
        "IMPROBABLE EXCISE",
        "FATEFUL LUBRICATION",
        "HYPERTENSION NEWBORNS",
        "TWENTY YARDSTICK",
        "PENETRATED DISCERNIBLE",
        "NEUROSIS SPECIFICITY",
        "PROPORTIONED DISTINGUISHING",
        "ASTRONOMER RECTIFY",
        "WORKSHOP PREPONDERANCE",
        "MAFIA ANTHOLOGIES",
        "ROAMING GODFATHER",
        "SUBTRACT TWILIGHT",
        "TREASURER RATIONALIZED",
        "THERAPIES SOCIOLOGICAL",
        "IDEOLOGY YOUNGSTER",
        "NITRIC CONSEQUENTIAL",
        "INFERENCES SOMEPLACE",
        "CRIMINALS SOLICITED",
        "WILFUL LANDSCAPES",
        "DIVERSIFICATION NEARED",
        "SCULPTURAL LIMITATIONS",
        "DIVIDEND DEPOLARIZATION",
        "EXTRAORDINARY YACHT",
        "PLATELETS SEDIMENTARY",
        "EXTRACTED DIPLOMAT",
        "EXPERIMENT TOWNSPEOPLE",
        "IMITATING GEOGRAPHIC",
        "RETRIEVE EXPLANATORY",
        "ENGINES SUBSCRIPTIONS",
        "MONTHS SIDEWAYS",
        "ILIAC CONSTRUCTED",
        "IMPERIALISTS SYMPATHETIC",
        "SCHOLARSHIP PRECINCT",
        "EXPLOITED DEFUNCT",
        "LESIONS SCRATCHING",
        "PROVISIONAL LAMENTATIONS",
        "PATHS SUPERSONIC",
        "PLEASURES SCIENTIFIC",
        "ROTATES SPECULATIVE",
        "MANIFESTO OVERCAST",
        "BLUSHING GROWTH",
        "REINFORCES SCULPTURE",
        "ANTHOLOGY YOUNGSTER",
        "COLOURING GLUTAMATE",
        "TREMENDOUSLY YOUNGSTERS",
        "EXHAUSTION NIGHTINGALE",
        "TEARS SYMBOLIZES",
        "DRIFTED DISORGANIZATION",
        "ADOPTIVE EDUCATORS",
        "APACHES SEDUCTION",
        "WATERWAYS SILICONE",
        "INFINITIVE EXTINGUISHED",
        "RHEUMATOID DEROGATORY",
        "GOVERNMENTS STEREOTYPED",
        "HISTORY YANKED",
        "BOARDS STALKING",
        "HANDSOME EXPLORES",
        "SQUAD DISGRACEFUL",
        "TRIMESTER REGULATORY",
        "STUDIED DEPRECIATION",
        "ESTABLISHED DIRECTOR",
        "WASTE EXTRAORDINARY",
        "FICTION NEURALGIA",
        "LIMESTONE EAGERLY",
        "BANDWIDTH HECTOR",
        "REFLECTIONS SEASONING",
        "ABRASION NEOLITHIC",
        "PROVISION NIGHTLY",
        "ENJOYMENT TRANSLATIONAL",
        "LIGHTEST TRACKED",
        "FORMERLY YOUNGSTERS",
        "ANTICIPATED DRUGS",
        "ADRIFT TUBERCLES",
        "TROPHIC CONDUCTANCE",
        "INSTINCTIVELY YOUTH",
        "DIVERTED DISEQUILIBRIUM",
        "ECZEMA ARTICULATION",
        "MELON NEIGHBOURS",
        "INCLUDE EXCERPTS",
        "CURLS SHARPENING",
        "RAINBOW WITHDRAWALS",
        "PRECAUTIONS SUBTRACTION",
        "HERCULES SYNOPSIS",
        "PSYCHOLOGY YONDER",
        "IMBIBED DISRUPTION",
        "PRODUCTIVE ENSUES",
        "LOCALIZED DRIFTS",
        "LUSTRE ESTABLISHMENT",
        "URETHRA ADJOINING",
        "LICENCES SOLIDARITY",
        "SHAMEFUL LATENCY",
        "RAPIDS SUBALTERN",
        "WHEREWITH HYPOTHESIZED",
        "MIXER RESPECTIVELY",
        "OTHER REGIONALISM",
        "NAUGHT TIRESOME",
        "JURISDICTIONS SUBSETS",
        "PREVIOUSLY YONDER",
        "OXIDIZING GEOMETRIES",
        "TIGER READJUSTMENT",
        "PRIZED DISTRIBUTIONS",
        "SYMBOLISM MEDITATION",
        "STIPULATION NICHE",
        "SPACES STUDYING",
        "THEREOF FEASIBILITY",
        "CHROME EXCLAMATION",
        "INVERT TELEGRAPHED",
        "EXPOSES SUCKLING",
        "POLICIES SPROUTING",
        "RECREATIONAL LIQUORS",
        "SOMBRE EVALUATED",
        "LAMENTATION NURSING",
        "ADVANCES STATUTORY",
        "ELECTROSTATIC CARDIOVASCULAR",
        "FISHERIES SUBSECTION",
        "SENSATIONAL LYMPHOMA",
        "RADIATED DISCOVERING",
        "THINK KEYBOARD",
        "POSTMAN NIGHTMARES",
        "RAILROADS SUBORDINATED",
        "FINEST TRUSTWORTHY",
        "FORMERLY YOUNGSTER",
        "BRINGING GLYCOPROTEIN",
        "ENUNCIATED DELIVERS",
        "IMPRINTED DISCONTINUE",
        "WATER REINFORCEMENTS",
        "BLAND DETERMINISTIC",
        "LORDS SHIPBUILDING",
        "WOUNDING GEOMETRIC",
        "CLANDESTINE EXEMPTED",
        "BROKE EXCLAIMS",
        "FRANKS SOLDIERY",
        "MYRIADS SUPERNATANT",
        "CLIMATIC CYBERSPACE",
        "AFORE ESCHATOLOGICAL",
        "UNDER REGULATIONS",
        "MOTIVATES SELECTING",
        "QUADRANT TRIBESMEN",
        "SEWING GLAUCOMA",
        "EVAPORATED DELICATELY",
        "VISUALIZED DEPARTS",
        "MARKEDLY YOGURT",
        "UNDERMINING GENEROUSLY",
        "SPACED DROUGHT",
        "CERTAIN NEIGHBORS",
        "INTERVIEWS STATESMANSHIP",
        "MEDIEVAL LOGARITHM",
        "STREAMLINED DIGESTION",
        "IDIOTS SUBJUNCTIVE",
        "PROVISO OSTENSIBLY",
        "MONSTERS SAGACIOUS",
        "ASTRAL LUMBERING",
        "BOARD DEREGULATION",
        "DETECTIVE EXPROPRIATION",
        "TOGETHER ROMANTICS",
        "PHOTOGRAPHER REFERENCES",
        "SEALING GOVERNMENTS",
        "REJOICED DISTRIBUTION",
        "MIXING GRACEFUL",
        "FORMER REHABILITATION",
        "AGITATED DOWNSTREAM",
        "AWESOME EXPECTANCY",
        "HUNTS SPECIFICATION",
        "IMPORTING GRAVES",
        "WEAKLY YARDSTICK",
        "LAMINATED DISTRACTIONS",
        "BEWILDERMENT TAILOR",
        "REPRODUCES SEMICONDUCTORS",
        "DIOXIDE ESTRANGEMENT",
        "INANIMATE ETHNOGRAPHY",
        "REFUSAL LIGHTEN",
        "ITERATIVE EXCLAMATION",
        "NATURED DISPATCH",
        "COMPLYING GOURD",
        "DELIGHTFUL LICENSE",
        "PERFORCE EXPERIMENTS",
        "DETECTORS SIGNIFYING",
        "EDUCATORS SUBORDINATED",
        "FORTITUDE EMBRYOS",
        "REVUE ETHNOGRAPHY",
        "ENLARGE ESTABLISHMENTS",
        "DELINEATE EXCLUSIVE",
        "CONVENIENCES SIGNATURES",
        "PROBATION NATURALISTIC",
        "EXTRINSIC CATASTROPHIC",
        "INVESTIGATES SOFTWARE",
        "LEGITIMACY YOUNG",
        "VACATION NEIGHBOR",
        "MAGNATES SUBJUGATION",
        "FISHERMEN NEGATION",
        "SCRIPT THOUSANDS",
        "ENTREPRENEUR RIDICULOUS",
        "STERLING GYMNASIUM",
        "HALTED DISCRIMINATED",
        "BARING GEOPOLITICAL",
        "CASEIN NEUTRALIZING",
        "PLAYFUL LODGINGS",
        "ELITIST TOPOGRAPHY",
        "OUNCE ELECTROCHEMICAL",
        "SAVING GRATEFUL",
        "PRECIPITATED DEVOTIONAL",
        "MUSCULAR RESTORATIVE",
        "AROUSING GHASTLY",
        "ORIGINATING GOLDSMITH",
        "CONFERENCES SHADOWY",
        "PATHOLOGIST THYMUS",
        "LEBEN NOURISHMENT",
        "TARSUS SYMPATHETIC",
        "CONCLUDES SHOCKING",
        "DIURNAL LEGISLATIVE",
        "PATRIOTIC CONFISCATED",
        "ELECT TOMOGRAPHY",
        "AWAKENS SCORNFUL",
        "REVEALED DISPATCHES",
        "DEFIANT TRANSFORMATIVE",
        "DYNASTIES SUPERSTRUCTURE",
        "DISPLACING GEOPOLITICAL",
        "SIMPLIFYING GENTLEMAN",
        "DISCONTINUITY YANKED",
        "FRIGID DISLOCATION",
        "LATHE EXPULSION",
        "BIBLES SOPHISTICATED",
        "CONFIDENTIALITY YANKED",
        "CRAZY YOUNGSTER",
        "REPUTABLE EMINENCE",
        "ZEBRA ANISOTROPY",
        "YARDS SUBSERVIENT",
        "INEXPERIENCE EVENTUAL",
        "SCOTS SUBORDINATED",
        "NUCLEOTIDE EXPOSES",
        "TREMENDOUSLY YOURSELF",
        "CALIBRE EXPECTANCY",
        "FENCES STUMBLING",
        "INSIDERS SUPERMARKETS",
        "COMBUSTION NOTIFIED",
        "WRENCH HORIZONTAL",
        "DISCONTINUITIES SALTY",
        "DEADLOCK KNOWINGLY",
        "ASTONISHED DURING",
        "CONSTRUCTIONS SCALED",
        "DEPLETED DEMONSTRABLE",
        "MEASLES SHIPWRECK",
        "ELECTROPHORESIS STUDS",
        "SEGMENTAL LUXURY",
        "OPTIONS SUBPARAGRAPH",
        "REPLIES SOCIALIZATION",
        "STARTLING GLUTATHIONE",
        "TWINE ENFORCEABLE",
        "UNIVERSITY YACHT",
        "INSTRUMENTS SUITABLY",
        "SIMULATING GLOVES",
        "EMULATION NOTCHED",
        "ACTUALIZATION NAKED",
        "DISBANDED DEHYDROGENASE",
        "DISEASE EPISTEMOLOGY",
        "REVERED DEMONSTRATING",
        "HOMEOSTASIS SIGNIFICANT",
        "SEVER REHABILITATION",
        "CONTOURS SUPERMARKETS",
        "FUNGUS SEXUALITY",
        "SUPRA AUTHENTICATION",
        "OSTENSIBLY YANKED",
        "REFERENCES SYPHILITIC",
        "INADEQUACY YOURS",
        "RICHEST TRAMPLED",
        "PATERNALISM MOMENTOUS",
        "EVERYONE EXCLUSIVELY",
        "DEPICTED DOUBLING",
        "NUANCES SINGULARITY",
        "INVEST THROUGHPUT",
        "IONIZATION NEUROPATHY",
        "LICENSES STOCKHOLDER",
        "ARCHES SOUNDING",
        "NITROUS SIMULATED",
        "DEBTORS SPECTACULAR",
        "THINLY YOURSELVES",
        "SCULPTORS SEGMENT",
        "SWORD DESIRABILITY",
        "MUSCLES SUBSTANTIATED",
        "ACQUISITION NOBLY",
        "PAVING GROWLED",
        "CHAPMAN NUCLEATION",
        "SACRAL LYMPHOID",
        "PREVAIL LANDMARKS",
        "COMPLICATED DRAFTED",
      ]
    `)
  })
})
